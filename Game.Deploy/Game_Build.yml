trigger: none

pool: Default

variables:
- group: 'DEV - Environment Variables'
- name: repository
  value: 'game-server'


jobs:
- job: Build_Server
  steps:
  - task: Docker@2
    displayName: Build Image
    inputs:
      command: build
      repository: '$(repository)'
      dockerfile: '$(Build.SourcesDirectory)/Game.Server/Dockerfile'
      buildContext: $(Build.SourcesDirectory)
      tags: |
        latest
        $(Build.BuildNumber)
  - task: CmdLine@2
    displayName: Prune Dangling Images
    inputs:
      script: |
        docker image prune -
- job: Build_Client
  steps:
  - task: CmdLine@2
    displayName: Hello World
    inputs:
      script: |
        echo "Hello World"